@using Application.DTOs.ProductDTOs
@model IEnumerable<ProductDto>

@{
    ViewData["Title"] = "Silinen Ürünler";
    var index = 1;
}

<div class="category-page">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <div class="d-flex align-items-center gap-2 mb-1">
                <div class="category-icon-wrap">
                    <i class="bi bi-box-seam"></i>
                </div>
                <h2 class="page-title mb-0">Çöp Kutusu (Ürünler)</h2>
            </div>
            <p class="text-muted mb-0">
                Silinmiş ürünleri buradan görebilir, geri yükleyebilir veya kalıcı olarak silebilirsiniz.
            </p>
        </div>

        <a asp-area="Admin" asp-controller="Product" asp-action="Index"
           class="btn btn-outline-secondary d-flex align-items-center gap-2">
            <i class="bi bi-arrow-left"></i>
            <span>Listeye Dön</span>
        </a>
    </div>

    <div class="card category-card shadow-sm">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table mb-0 category-table align-middle">
                    <thead>
                        <tr>
                            <th style="width:60px;">#</th>
                            <th>Ürün Adı</th>
                            <th>Fiyat</th>
                            <th>Kategori Id</th>
                            <th style="width: 220px;" class="text-center">İşlemler</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (!Model.Any())
                        {
                            <tr>
                                <td colspan="5" class="text-center py-4 text-muted">
                                    Çöp kutusunda ürün yok.
                                </td>
                            </tr>
                        }
                        else
                        {
                            foreach (var item in Model)
                            {
                                <tr>
                                    <td class="text-muted">@index</td>
                                    <td>@item.Name</td>
                                    <td>@item.Price.ToString("C")</td>
                                    <td>@item.CategoryId</td>
                                    <td class="text-center">
                                        <div class="d-flex justify-content-center gap-1">

                                            <!-- Geri Yükle -->
                                            <form asp-area="Admin"
                                                  asp-controller="Product"
                                                  asp-action="Restore"
                                                  asp-route-id="@item.Id"
                                                  method="post"
                                                  class="d-inline">
                                                <button type="submit"
                                                        class="btn btn-success btn-sm"
                                                        title="Geri Yükle">
                                                    <i class="bi bi-arrow-counterclockwise"></i>
                                                </button>
                                            </form>

                                            <!-- Kalıcı Sil -->
                                            <form asp-area="Admin"
                                                  asp-controller="Product"
                                                  asp-action="HardDelete"
                                                  asp-route-id="@item.Id"
                                                  method="post"
                                                  class="d-inline"
                                                  onsubmit="return confirm('@item.Name ürününü kalıcı olarak silmek istediğinize emin misiniz?');">
                                                <button type="submit"
                                                        class="btn btn-danger btn-sm"
                                                        title="Kalıcı Sil">
                                                    <i class="bi bi-trash3"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                                index++;
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        .category-page {
            background: transparent;
        }

        .page-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: #1f2937;
        }

        .category-icon-wrap {
            width: 40px;
            height: 40px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #eef2ff, #e0e7ff);
            color: #4f46e5;
            font-size: 1.4rem;
        }

        .category-card {
            border-radius: 18px;
            border: none;
            overflow: hidden;
        }

        .category-table thead {
            background: #f9fafb;
        }

            .category-table thead th {
                font-size: .78rem;
                text-transform: uppercase;
                letter-spacing: .06em;
                color: #6b7280;
                border-bottom: 1px solid #e5e7eb;
            }

        .category-table tbody tr {
            transition: background-color 0.18s ease, transform 0.12s ease;
        }

            .category-table tbody tr:hover {
                background: #f5f7ff;
                transform: translateX(2px);
            }

        .category-table td {
            border-top: 1px solid #f1f5f9;
            font-size: .95rem;
        }
    </style>
}
